---
- name: Add basic packages
  hosts: all
  tasks:
    - name: ensure essential packages installed
      xbps:
        name: bash,vim,htop,opendoas,net-tools,git,vsv
        state: latest

- name: Install icecast and docker
  hosts: server
  tasks:
    - name: ensure additional packages installed
      xbps:
        name: icecast,docker,docker-cli,docker-compose
        state: latest

- name: Setup docker
  hosts: server
  tasks:
    - name: run docker daemon on boot
      runit:
        name: docker
        enabled: true
        state: started
